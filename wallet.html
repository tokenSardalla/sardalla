<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sardalla Wallet</title>

<link rel="stylesheet" href="wallet.css?v=2" />

<style>
.toast{
  position:fixed; left:50%; bottom:20px;
  transform:translateX(-50%);
  background:#063a6b; color:#fff;
  padding:10px 18px; border-radius:8px;
  display:none; z-index:2000;
}
.small-muted{ color:#bcd6ff; font-size:12px; }
.badge-saved{
  background:#ffda1a; color:#05203a;
  padding:2px 8px; border-radius:999px;
  font-size:11px; font-weight:700;
  margin-left:6px;
}
.modal-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,0.5);
  display:none; align-items:center; justify-content:center;
  z-index:3500;
}
.modal{
  background:#07233f; padding:20px; width:480px;
  border-radius:14px; color:white;
}
.modal .p-2{ padding:8px; width:100%; }
.modal-actions{ margin-top:16px; display:flex; justify-content:flex-end; }
#savingOverlay{
  position:fixed; inset:0; background:rgba(0,0,0,0.5);
  display:none; align-items:center; justify-content:center;
  color:white; font-size:24px; z-index:2600;
}
</style>
</head>

<body>

<div class="wallet-wrap">

  <!-- HEADER -->
  <header class="wallet-header">
    <a class="brand">
      <img src="logo_sardalla_96px.webp" />
      <div>
        <div class="brand-title">Sardalla <span class="accent">Wallet</span></div>
        <div class="brand-sub">Self-custody — BEP-20</div>
      </div>
    </a>
  </header>

  <!-- MAIN GRID -->
  <div class="wallet-main">

      <!-- LEFT PANEL -->
      <div class="panel">

        <h2>Create Wallet</h2>

        <button class="btn primary full" id="createWalletBtn">Create New Wallet</button>
        <button class="btn outline full" id="openImportBtn" style="margin-top:8px;">Import Wallet</button>
        <button class="btn outline full" id="cancelCreateBtn" style="display:none;margin-top:8px;">Cancel</button>

        <!-- Create Wallet -->
        <div id="mnemonicBox" style="display:none; margin-top:16px;">
          <h3>Recovery Phrase</h3>

          <div id="phraseSection">
            <textarea id="mnemonicDisplay" rows="3"
              style="width:100%; padding:8px; display:none;"></textarea>

            <div style="display:flex; gap:8px; margin-top:8px;">
              <button class="btn secondary" id="showMnemonicBtn" style="display:none;">Show Phrase</button>
              <button class="btn outline" id="copyMnemonicBtn" style="display:none;">Copy</button>
              <button class="btn primary" id="mnemonicOkBtn" style="display:none;">I Saved It</button>
            </div>
          </div>

          <div style="margin-top:12px;">
            <input id="walletNameInput" placeholder="Wallet name"
                   style="width:100%; padding:8px; margin-bottom:6px;" />

            <input id="saveKeystorePwd" type="password" placeholder="Keystore password (min 8 chars)"
                   style="width:100%; padding:8px; margin-bottom:6px;" />

            <button class="btn" id="saveKeystoreBtn" disabled style="width:100%;">Encrypt & Save Keystore</button>

            <div id="saveHint" class="small-muted"
                 style="display:none; margin-top:8px;">
              Step: Confirm your mnemonic, then save your keystore safely.
            </div>
          </div>
        </div>

        <h2 style="margin-top:20px;">Your Saved Wallets</h2>
        <div id="walletList"></div>

        <button class="btn outline full" id="clearAllBtn" style="margin-top:12px;">Clear All (localStorage)</button>

      </div>
      <!-- END LEFT PANEL -->


      <!-- RIGHT PANEL -->
      <div class="panel">

        <h2>Loaded Wallet</h2>
        <div><strong id="walletAddress">—</strong></div>

        <div id="qrcode" style="margin-top:14px;"></div>

        <!-- TRUST/ZANO STYLE CARD -->
        <div class="wallet-card" style="margin-top:18px;">

          <div class="wallet-card-header">
            <div class="wallet-name">Sardalla Wallet</div>
            <div class="wallet-online-dot"></div>
          </div>

          <div class="wallet-address-line">
            <span id="walletShortAddr">0x----</span>
            <button class="copy-btn" id="copyAddrBtn">Copy</button>
          </div>

          <div class="wallet-total-usd">
            <span id="walletTotalUSD">$0.00</span>
          </div>

          <div class="wallet-change">
            <span id="walletChange24h">+0.00%</span>
          </div>

        </div>

        <!-- ACTIONS -->
        <div class="wallet-actions">
          <button class="action-btn" id="openSendModalBtn">Send</button>
          <button class="action-btn" id="openReceiveModalBtn">Receive</button>
          <button class="action-btn" id="viewHistoryBtn">History</button>
        </div>

        <h3 class="token-title" style="margin-top:22px;">Assets</h3>

        <div class="token-item" id="tokenBNB">
          <img src="" class="token-icon">
          <div class="token-info">
            <div class="token-symbol">BNB</div>
            <div class="token-balance" id="bnbBalance">0</div>
          </div>
          <div class="token-fiat" id="bnbUSD">$0.00</div>
        </div>

        <div class="token-item" id="tokenSAR">
          <img src="logo_sardalla_64px.png" class="token-icon">
          <div class="token-info">
            <div class="token-symbol">SAR</div>
            <div class="token-balance" id="sarBalance">0</div>
          </div>
          <div class="token-fiat" id="sarUSD">$0.00</div>
        </div>

      </div>
      <!-- END RIGHT PANEL -->

  </div>
  <!-- END wallet-main -->


  <!-- STATUS ROW (dynamic messages from JS) -->
  <div class="status-row" id="walletStatus">Ready.</div>

  <!-- FOOTER -->
  <footer class="wallet-footer">
      <span>© 2025–2027 Sardalla (SAR)</span>
      <a href="mailto:sardalla@sardalla.com">Contact</a>
      <a href="index.html">Website</a>
  </footer>

</div>
<!-- END wallet-wrap -->


<!-- IMPORT MODAL -->
<div id="importModal" class="modal-backdrop">
  <div class="modal">

    <h3>Import Wallet</h3>

    <h4 style="margin-top:10px;">From Mnemonic</h4>

    <textarea id="impMnemonic" rows="2" class="p-2" placeholder="seed phrase"></textarea>

    <input id="impMnemonicName" class="p-2" placeholder="Wallet name" style="margin-top:8px;">
    <input id="impMnemonicPwd" class="p-2" type="password" placeholder="Keystore password" style="margin-top:8px;">

    <button class="btn secondary full" id="impMnemonicBtn" style="margin-top:10px;">
      Import mnemonic → keystore
    </button>

    <hr style="margin:18px 0; border-color:#1e2c4d;">

    <h4>From Keystore JSON</h4>

    <textarea id="impJson" rows="3" class="p-2" placeholder="Paste keystore JSON"></textarea>

    <input id="impJsonName" class="p-2" placeholder="Wallet name" style="margin-top:8px;">
    
    <button class="btn outline full" id="impJsonBtn" style="margin-top:10px;">
      Import Keystore JSON
    </button>

    <div class="modal-actions">
      <button class="btn" id="impCancelBtn">Close</button>
    </div>
  </div>
</div>


<div id="toast" class="toast"></div>
<div id="savingOverlay">Saving wallet…</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script src="wallet.js"></script>

</body>
</html>




